# μ¤νΈλ¦Ό λ€κΈ°μ—΄ μ‹μ¤ν…

## κ°μ”

λ™μ‹ μ¤νΈλ¦Ό μ μ ν•(5κ°)μ„ μ΄κ³Όν•λ” μ”μ²­μ΄ μ™€λ„ **μ”μ²­μ΄ λ„λ½λμ§€ μ•κ³  μμ°¨μ μΌλ΅ μ²λ¦¬**λλ„λ΅ λ€κΈ°μ—΄ μ‹μ¤ν…μ„ κµ¬ν„ν–μµλ‹λ‹¤.

## λ™μ‘ λ°©μ‹

### 1. μ •μƒ μΌ€μ΄μ¤
- μ¤νΈλ¦Ό μ¬λ΅―μ΄ μμΌλ©΄ μ¦‰μ‹ μ‹μ‘
- κ°™μ€ `deviceId`μ— λ€ν• μ”μ²­μ€ κΈ°μ΅΄ μ¤νΈλ¦Όμ— ν΄λΌμ΄μ–ΈνΈ μ¶”κ°€

### 2. μ ν• μ΄κ³Ό μΌ€μ΄μ¤
- μ¤νΈλ¦Όμ΄ 5κ°μΌ λ• μƒλ΅μ΄ μ”μ²­μ΄ μ¤λ©΄:
  1. **λ€κΈ°μ—΄μ— μ¶”κ°€** (μ”μ²­ λ„λ½ λ°©μ§€)
  2. ν΄λΌμ΄μ–ΈνΈμ—κ² `streamQueued` μ΄λ²¤νΈ μ „μ†΅
  3. κΈ°μ΅΄ μ¤νΈλ¦Όμ΄ μΆ…λ£λλ©΄ **μλ™μΌλ΅ λ‹¤μ μ”μ²­ μ²λ¦¬**
  4. μ²λ¦¬λλ©΄ `streamStarted` μ΄λ²¤νΈ μ „μ†΅

### 3. ν΄λΌμ΄μ–ΈνΈ μ—°κ²° ν•΄μ 
- ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²° ν•΄μ λλ©΄:
  - λ€κΈ° μ¤‘μΈ μ”μ²­ μλ™ μ κ±°
  - λ‹¤μ λ€κΈ° μ¤‘μΈ μ”μ²­ μλ™ μ²λ¦¬

## μ΄λ²¤νΈ

### ν΄λΌμ΄μ–ΈνΈκ°€ λ°›λ” μ΄λ²¤νΈ

1. **`streamQueued`** - λ€κΈ°μ—΄μ— μ¶”κ°€λ¨
```typescript
{
  deviceId: string;
  queuePosition: number;  // λ€κΈ° μμ„ (1λ¶€ν„° μ‹μ‘)
  message: string;
}
```

2. **`streamStarted`** - μ¤νΈλ¦Ό μ‹μ‘λ¨
```typescript
{
  deviceId: string;
}
```

3. **`streamError`** - μ—λ¬ λ°μƒ
```typescript
{
  message: string;
}
```

## νΉμ§•

### β… μ”μ²­ λ„λ½ λ°©μ§€
- λ¨λ“  μ”μ²­μ΄ λ€κΈ°μ—΄μ— μ¶”κ°€λμ–΄ μ²λ¦¬λ¨
- μμ°¨μ μΌλ΅ μ²λ¦¬λμ–΄ μ•μ •μ„± λ³΄μ¥

### β… μλ™ μ²λ¦¬
- μ¤νΈλ¦Όμ΄ μΆ…λ£λλ©΄ μλ™μΌλ΅ λ‹¤μ μ”μ²­ μ²λ¦¬
- ν΄λΌμ΄μ–ΈνΈκ°€ μ¬μ‹λ„ν•  ν•„μ” μ—†μ

### β… νƒ€μ„μ•„μ›ƒ λ³΄νΈ
- 5λ¶„ λ€κΈ° ν›„ μλ™ νƒ€μ„μ•„μ›ƒ
- λ¬΄ν• λ€κΈ° λ°©μ§€

### β… μ—°κ²° ν•΄μ  μ²λ¦¬
- ν΄λΌμ΄μ–ΈνΈ μ—°κ²° ν•΄μ  μ‹ λ€κΈ° μ¤‘μΈ μ”μ²­ μλ™ μ κ±°
- λ©”λ¨λ¦¬ λ„μ λ°©μ§€

## μμ‹ μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: μ •μƒ λ™μ‘
```
1. ν΄λΌμ΄μ–ΈνΈ Aκ°€ device1 μ¤νΈλ¦Ό μ”μ²­ β†’ μ¦‰μ‹ μ‹μ‘ β…
2. ν΄λΌμ΄μ–ΈνΈ Bκ°€ device2 μ¤νΈλ¦Ό μ”μ²­ β†’ μ¦‰μ‹ μ‹μ‘ β…
3. ν΄λΌμ΄μ–ΈνΈ Cκ°€ device1 μ¤νΈλ¦Ό μ”μ²­ β†’ κΈ°μ΅΄ μ¤νΈλ¦Όμ— μ¶”κ°€ β…
```

### μ‹λ‚λ¦¬μ¤ 2: λ€κΈ°μ—΄ λ™μ‘
```
1-5. ν΄λΌμ΄μ–ΈνΈ A~Eκ°€ κ°κ° μ¤νΈλ¦Ό μ”μ²­ β†’ λ¨λ‘ μ¦‰μ‹ μ‹μ‘ β…
6. ν΄λΌμ΄μ–ΈνΈ Fκ°€ device6 μ¤νΈλ¦Ό μ”μ²­ β†’ λ€κΈ°μ—΄ μ¶”κ°€ (μμ„: 1)
7. ν΄λΌμ΄μ–ΈνΈ Gκ°€ device7 μ¤νΈλ¦Ό μ”μ²­ β†’ λ€κΈ°μ—΄ μ¶”κ°€ (μμ„: 2)
8. ν΄λΌμ΄μ–ΈνΈ Aκ°€ μ¤νΈλ¦Ό μΆ…λ£ β†’ ν΄λΌμ΄μ–ΈνΈ F μλ™ μ²λ¦¬ β…
9. ν΄λΌμ΄μ–ΈνΈ Bκ°€ μ¤νΈλ¦Ό μΆ…λ£ β†’ ν΄λΌμ΄μ–ΈνΈ G μλ™ μ²λ¦¬ β…
```

## λ©”λ¨λ¦¬ μ‚¬μ©λ‰

- λ€κΈ°μ—΄μ€ λ©”λ¨λ¦¬μ—λ§ μ €μ¥ (Redis λ¶ν•„μ”)
- κ° λ€κΈ° μ”μ²­: ~100 bytes
- 100κ° λ€κΈ° μ”μ²­: ~10KB (λ¬΄μ‹ κ°€λ¥ν• μμ¤€)

## μ ν• μ‚¬ν•­

- μµλ€ λ™μ‹ μ¤νΈλ¦Ό: **5κ°**
- λ€κΈ° νƒ€μ„μ•„μ›ƒ: **5λ¶„**
- λ€κΈ°μ—΄ ν¬κΈ°: **μ ν• μ—†μ** (λ©”λ¨λ¦¬ ν—μ© λ²”μ„ λ‚΄)

## κ²°λ΅ 

**λ™μ‹ μ”μ²­μ΄ μ™€λ„ λ„λ½λμ§€ μ•κ³  μμ°¨μ μΌλ΅ μ²λ¦¬λ©λ‹λ‹¤!** π‰

- β… μ”μ²­ λ„λ½ μ—†μ
- β… μμ°¨ μ²λ¦¬ λ³΄μ¥
- β… μλ™ μ¬μ‹λ„ λ¶ν•„μ”
- β… μ•μ •μ μΈ λ™μ‘




